# Декодер Азбуки Морзе для Raspberry Pi

Приложение на Python для декодирования азбуки Морзе с телеграфного ключа с выводом на HDMI монитор. Идеально подходит для образовательных целей, практики азбуки Морзе или как основа для более сложных проектов.

## Возможности

- Декодирование азбуки Морзе в реальном времени с визуальной индикацией
- Поддержка ввода с телеграфного ключа через GPIO
- Чистый, адаптивный интерфейс, оптимизированный для HDMI-дисплеев
- Поддержка нескольких участников (до 9)
- Автоматическое сохранение расшифрованного текста
- Настраиваемые временные параметры
- Полноэкранный и оконный режимы
- Эмуляция с клавиатуры для тестирования без оборудования

## Аппаратные требования

- Raspberry Pi 4 Model B (или совместимая модель)
- HDMI монитор
- Телеграфный ключ или кнопка
- Соединительные провода

## Подключение

Подключите телеграфный ключ к Raspberry Pi:

- Один провод к GPIO 17 (нумерация BCM)
- Второй провод к GND

```
Телеграфный ключ → GPIO 17
                → GND
```

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/morse-decoder.git
   cd morse-decoder
   ```

2. Установите зависимости:
   ```bash
   sudo apt-get update
   sudo apt-get install python3-pip python3-pygame
   pip3 install -r requirements.txt
   ```

## Использование

## Быстрый запуск

```bash
# Основной режим (полноэкранный, авто-определение ввода)
python main.py

# Оконный режим для разработки
python main.py --window

# Режим клавиатуры для тестирования
python main.py --window --keyboard

# GPIO режим для Raspberry Pi
python main.py --gpio

# Отладочный режим
python main.py --window --keyboard --debug

# Оптимизация производительности для Raspberry Pi 4
python main.py --high-performance  # Отключает все эффекты, 15 FPS
python main.py --no-crt           # Отключает CRT-эффект
python main.py --no-neon          # Отключает неоновые эффекты
python main.py --low-fps          # Устанавливает 10 FPS
```

## Аргументы командной строки

- `--window` - оконный режим вместо полноэкранного
- `--keyboard` - принудительный режим клавиатуры
- `--gpio` - принудительный режим GPIO
- `--debug` - отладочный режим
- `--high-performance` - высокопроизводительный режим (15 FPS, без эффектов)
- `--no-crt` - отключить CRT-эффект
- `--no-neon` - отключить неоновые эффекты
- `--low-fps` - понизить частоту кадров до 10 FPS
- `--no-hw-accel` - отключить аппаратное ускорение
- `--no-vsync` - отключить VSync
- `--no-smooth-startup` - отключить плавный запуск (уменьшает задержку)

## Оптимизация производительности для Raspberry Pi 4

Для лучшей производительности на Raspberry Pi 4:

### Автоматическая оптимизация
Приложение автоматически определяет Raspberry Pi и применяет:
- Снижение FPS до 15
- Отключение CRT-эффектов по умолчанию
- Отключение неоновых эффектов по умолчанию
- Аппаратное ускорение GPU
- VSync для плавной прорисовки
- Двойная буферизация

### Масштабирование разрешения
- **Целевое разрешение**: 1024x768 для оптимальной производительности
- **Авто-масштабирование**: на 2K+ мониторах игра рендерится в 1024x768 и масштабируется до нативного разрешения
- **Сохранение производительности**: частота кадров остается стабильной независимо от разрешения монитора

### Ручная оптимизация
```bash
# Высокая производительность (рекомендуется для 2K мониторов)
python main.py --high-performance

# Сбалансированная производительность
python main.py --no-crt --no-neon

# Максимальная производительность
python main.py --low-fps --no-crt --no-neon --no-hw-accel --no-vsync
```

### Дополнительные параметры
- `--no-hw-accel` - отключить аппаратное ускорение
- `--no-vsync` - отключить VSync
- `--window` - оконный режим для отладки
- `--no-smooth-startup` - отключить плавный запуск (уменьшает моргание при старте)

### Рекомендуемые настройки
```bash
# Для 2K мониторов на RPi 4
python main.py --high-performance

# Для стандартных мониторов
python main.py --no-crt --no-neon

# Если все еще тормозит
python main.py --low-fps --no-crt --no-neon --no-hw-accel
```

## Структура проекта

```
src/
├── app.py              # Основное приложение
├── core/               # Логика игры
├── ui/                 # Интерфейс
├── input/              # Обработка ввода
└── data/               # Данные и сохранения
```

## Требования

```bash
pip install -r requirements.txt
```

## Управление в игре

- **Стрелки** - навигация по меню
- **Enter** - выбор/подтверждение
- **ESC** - выход/назад
- **Пробел** - ввод Морзе (в игре)
- **C** - очистить ввод (в игре)
- **F11** - переключить полноэкранный режим
